import { Meta, Canvas } from '@storybook/blocks';

import * as PhotoCarouselStories from './PhotoCarousel.stories.svelte';

<Meta of={PhotoCarouselStories} />

# PhotoCarousel

The `PhotoCarousel` component creates a simple and accessible photo carousel with built-in lazy-loading and mobile swipe.

```svelte
<script>
  import { PhotoCarousel } from '@reuters-graphics/graphics-components';

  const photos = [
    {
      src: 'https://.../myImage.jpg',
      altText: 'A picture of...',
      caption: 'My caption...', // Optional
      credit: 'REUTERS/Jane Doe', // Optional
      objectFit: 'contain', // Optional
      objectPosition: '50% 50%', // Optional
    },
  ];
</script>

<PhotoCarousel {photos} />
```

<Canvas of={PhotoCarouselStories.Demo} />

## Using with ArchieML docs

With the Graphics Kit, you'll likely get your text value from an ArchieML doc...

```yaml
# ArchieML doc
[blocks]
type: photo-carousel

# List of photo data
[.images]
  # Photo 1
  src: 'images/myImage.jpg', # The source path can be a URL or a local path
  altText: 'A picture of...',
  caption: 'My caption...', // Optional
  credit: 'REUTERS/Jane Doe', // Optional
  objectFit: 'contain', // Optional
  objectPosition: '50% 50%', // Optional

  # Photo 2
  src: 'images/myImage2.jpg',
  altText: 'A picture of...',
  caption: 'My caption...', // Optional
  credit: 'REUTERS/Jane Doe', // Optional
  objectFit: 'contain', // Optional
  objectPosition: '50% 50%', // Optional
  ...
[]
[]
```

... which you'll parse out of a ArchieML block object before passing to the `PhotoCarousel` component.

> **Note:** If you're using local images files stored in your Graphics Kit project, prefix `assets` to the image source path, as in the example below.

```svelte
<!-- App.svelte -->
<script>
  import { PhotoCarousel } from '@reuters-graphics/graphics-components';
  import { assets } from '$app/paths'; // ðŸ‘ˆ If using in the Graphics Kit...

  import content from '$locales/en/content.json';
</script>

{#each content.blocks as block}
  {#if block.type === 'photo-carousel'}
    <PhotoCarousel
      images={block.images.map((img) => ({
        ...img,
        src: `${assets}/${img.src}`,
      }))}
    />
  {/if}
{/each}
```

<Canvas of={PhotoCarouselStories.Demo} />

## Custom text

To customise the credit and/or caption style, use the `credit` and `caption` [snippets](https://svelte.dev/docs/svelte/snippet) and pass `photo` as an argument.

```svelte
<PhotoCarousel {images}>
  <!-- Pass `image` and use the `image.credit` string in the HTML -->
  {#snippet credit(image)}
    <p class="custom-credit">{image.credit}</p>
  {/snippet}

  <!-- Pass `image` and use the `image.caption` string in the HTML -->
  {#snippet caption(image)}
    <p class="custom-caption">{image.caption}</p>
  {/snippet}
</PhotoCarousel>

<!-- Customise credit and caption styles -->
<style lang="scss">
  p {
    position: absolute;
    color: white;
    background-color: rgba(0, 0, 0, 0.6);
    font-family: sans-serif;
    font-size: 0.8rem;
    padding: 0 5px;
    &.custom-credit {
      top: 0;
      right: 0;
    }
    &.custom-caption {
      bottom: 5px;
      left: 0;
    }
  }
</style>
```

<Canvas of={PhotoCarouselStories.CustomText} />
