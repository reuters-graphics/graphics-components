{"version":3,"file":"DatawrapperChart.stories-f2164477.js","sources":["../../src/components/DatawrapperChart/stories/docs/component.md?raw","../../src/components/DatawrapperChart/stories/docs/withChatter.md?raw","../../src/components/DatawrapperChart/DatawrapperChart.svelte","../../src/components/DatawrapperChart/DatawrapperChart.stories.svelte"],"sourcesContent":["export default \"Easily add a responsive Datawrapper embed on your page.\\n\\n```svelte\\n<script>\\n  import { DatawrapperChart } from '@reuters-graphics/graphics-components';\\n</script>\\n\\n<DatawrapperChart\\n  title=\\\"Global abortion access\\\"\\n  ariaLabel=\\\"map\\\"\\n  id=\\\"abortion-rights-map\\\"\\n  src=\\\"https://graphics.reuters.com/USA-ABORTION/lgpdwggnwvo/media-embed.html\\\"\\n/>\\n```\\n\\n##### Getting the chart URL for `src`\\n\\nCopy the source url for the Datawrapper chart in the `src` prop.\\nYou can get this from the published url on Reuters Graphics.\\n\\n- Publish the chart on Datawrapper.\\n- Go to the **Datawrapper charts** Teams channel, wait for the graphic to finish publishing.\\n- Inside **Embed code (for developers only)**, find and copy the url inside the `src` prop. (It ends in `media-embed.html`.)\\n\\n**Note:** There is no need to update the url if you update the chart inside Datawrapper. Any changes will be automatically reflected.\\n\"","export default \"By default, Datawrapper will export your chart with the chart chatter like title, description and notes.\\n\\nAt the moment, these don't _exactly_ match our styles and can't be made to fit into the article well.\\n\\nInstead, it's often better to remove all the text from your Datawrapper chart before publishing it and add that text back via the component props.\\n\"","<!-- @component `DatawrapperChart` [Read the docs.](https://reuters-graphics.github.io/graphics-components/?path=/docs/components-DatawrapperChart--default) -->\n<script lang=\"ts\">\n  import { onMount, onDestroy } from 'svelte';\n  import GraphicBlock from '../GraphicBlock/GraphicBlock.svelte';\n  import type { ContainerWidth } from '../@types/global';\n  /**\n   * Title of the graphic\n   * @type {string}\n   */\n  export let title: string | null = null;\n\n  /**\n   * Description of the graphic, passed in as a markdown string.\n   * @type {string}\n   */\n  export let description: string | null = null;\n  /**\n   * iframe title\n   * @required\n   */\n  export let frameTitle: string = '';\n  /**\n   * Notes to the graphic, passed in as a markdown string.\n   * @type {string}\n   */\n  export let notes: string | null = null;\n  /**\n   * iframe aria label\n   * @required\n   */\n  export let ariaLabel: string = '';\n  /** iframe id */\n  export let id: string = '';\n  /**\n   * Datawrapper embed URL\n   * @required\n   */\n  export let src: string;\n\n  type ScrollingOption = 'auto' | 'yes' | 'no';\n\n  /** iframe scrolling option */\n  export let scrolling: ScrollingOption = 'no';\n\n  /** Width of the chart within the text well. */\n  export let width: ContainerWidth = 'normal'; // options: wide, wider, widest, fluid\n\n  /**\n   * Set a different width for the text within the text well, for example,\n   * \"normal\" to keep the title, description and notes inline with the rest\n   * of the text well. Can't ever be wider than `width`.\n   * @type {string}\n   */\n  export let textWidth: ContainerWidth | null = 'normal';\n\n  let frameElement;\n\n  $: frameFiller = (e) => {\n    /* eslint-disable */\n    if (void 0 !== e.data['datawrapper-height']) {\n      const t = [frameElement];\n      for (const a in e.data['datawrapper-height']) {\n        for (let r = 0; r < t.length; r++) {\n          if (t[r].contentWindow === e.source) {\n            t[r].style.height = e.data['datawrapper-height'][a] + 'px';\n          }\n        }\n      }\n    }\n    /* eslint-enable */\n  };\n\n  onMount(() => {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('message', frameFiller);\n    }\n  });\n  onDestroy(() => {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('message', frameFiller);\n    }\n  });\n</script>\n\n<GraphicBlock\n  width=\"{width}\"\n  textWidth=\"{textWidth}\"\n  title=\"{title}\"\n  description=\"{description}\"\n  notes=\"{notes}\"\n>\n  {#if $$slots.title}\n    <!-- Custom headline and chatter slot -->\n    <slot name=\"title\" />\n  {/if}\n\n  <div class=\"datawrapper-chart\">\n    <iframe\n      bind:this=\"{frameElement}\"\n      title=\"{frameTitle}\"\n      aria-label=\"{ariaLabel}\"\n      id=\"{id}\"\n      src=\"{src}\"\n      scrolling=\"{scrolling}\"\n      frameborder=\"0\"\n      data-chromatic=\"ignore\"\n      style=\"width: 0; min-width: 100% !important; border: none;\"></iframe>\n  </div>\n\n  {#if $$slots.notes}\n    <!-- Custom notes and source slot -->\n    <slot name=\"notes\" />\n  {/if}\n</GraphicBlock>\n","<script>\n  import { Meta, Template, Story } from '@storybook/addon-svelte-csf';\n\n  // @ts-ignore\n  import componentDocs from './stories/docs/component.md?raw';\n  // @ts-ignore\n  import withChatterDocs from './stories/docs/withChatter.md?raw';\n\n  import DatawrapperChart from './DatawrapperChart.svelte';\n\n  import {\n    withComponentDocs,\n    withStoryDocs,\n  } from '$lib/docs/utils/withParams.js';\n\n  const metaProps = {\n    ...withComponentDocs(componentDocs),\n    argTypes: {\n      width: {\n        control: 'select',\n        options: ['normal', 'wide', 'wider', 'widest', 'fluid'],\n      },\n    },\n  };\n</script>\n\n<Meta\n  title=\"Components/DatawrapperChart\"\n  component=\"{DatawrapperChart}\"\n  {...metaProps}\n/>\n\n<Template let:args>\n  <DatawrapperChart {...args} />\n</Template>\n\n<Story\n  name=\"Default\"\n  args=\"{{\n    src: 'https://reuters.com/graphics/USA-ABORTION/lgpdwggnwvo/media-embed.html',\n    id: 'abortion-rights-map',\n    ariaLabel: 'map',\n    frameTitle: 'Global abortion access',\n  }}\"\n/>\n\n<Story name=\"With chatter\" {...withStoryDocs(withChatterDocs)}>\n  <DatawrapperChart\n    frameTitle=\"Global abortion access\"\n    ariaLabel=\"map\"\n    id=\"abortion-rights-map\"\n    src=\"https://reuters.com/graphics/USA-ABORTION/lgvdwemlbpo/media-embed.html\"\n    title=\"Global abortion access\"\n    description=\"A map of worldwide access to abortion.\"\n    notes=\"{'Note: Different indicators and additional restrictions, including different gestational limits, apply in some countries. Refer to source for full classification. Current as of May 4, 2022.\\n\\nSource: Center for Reproductive Rights'}\"\n  />\n</Story>\n"],"names":["componentDocs","withChatterDocs","if_block0","ctx","create_if_block_1","if_block1","create_if_block","attr","iframe","iframe_src_value","insert","target","div","anchor","append","title","$$props","description","frameTitle","notes","ariaLabel","id","src","scrolling","width","textWidth","frameElement","onMount","frameFiller","onDestroy","$$value","e","t","a","r","DatawrapperChart","story1_spread_levels","withStoryDocs","withComponentDocs"],"mappings":"ijBAAA,MAAeA,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAAC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qiBC2FRC,EAAAC,MAAQ,OAAKC,EAAAD,CAAA,EAkBbE,EAAAF,MAAQ,OAAKG,EAAAH,CAAA,uFAVNA,EAAU,CAAA,CAAA,mBACLA,EAAS,CAAA,CAAA,WACjBA,EAAE,CAAA,CAAA,YACDA,EAAG,CAAA,CAAA,GAAAI,EAAAC,EAAA,MAAAC,CAAA,kBACGN,EAAS,CAAA,CAAA,sLAPzBO,EAWKC,EAAAC,EAAAC,CAAA,EAVHC,GASsEF,EAAAJ,CAAA,sDAfnEL,MAAQ,sIAQDA,EAAU,CAAA,CAAA,+BACLA,EAAS,CAAA,CAAA,uBACjBA,EAAE,CAAA,CAAA,wBACDA,EAAG,CAAA,CAAA,8CACGA,EAAS,CAAA,CAAA,EAMpBA,MAAQ,oRAxBLA,EAAK,CAAA,YACDA,EAAS,CAAA,QACbA,EAAK,CAAA,cACCA,EAAW,CAAA,QACjBA,EAAK,CAAA,6HAJLA,EAAK,CAAA,uBACDA,EAAS,CAAA,iBACbA,EAAK,CAAA,uBACCA,EAAW,CAAA,iBACjBA,EAAK,CAAA,oMAhFF,GAAA,CAAA,MAAAY,EAAuB,IAAI,EAAAC,EAM3B,CAAA,YAAAC,EAA6B,IAAI,EAAAD,EAKjC,CAAA,WAAAE,EAAqB,EAAE,EAAAF,EAKvB,CAAA,MAAAG,EAAuB,IAAI,EAAAH,EAK3B,CAAA,UAAAI,EAAoB,EAAE,EAAAJ,EAEtB,CAAA,GAAAK,EAAa,EAAE,EAAAL,GAKf,IAAAM,CAAW,EAAAN,EAKX,CAAA,UAAAO,EAA6B,IAAI,EAAAP,EAGjC,CAAA,MAAAQ,EAAwB,QAAQ,EAAAR,EAQhC,CAAA,UAAAS,EAAmC,QAAQ,EAAAT,EAElDU,EAiBJC,GAAO,IAAA,CACM,OAAA,OAAW,KACpB,OAAO,iBAAiB,UAAWC,CAAW,IAGlDC,GAAS,IAAA,CACI,OAAA,OAAW,KACpB,OAAO,oBAAoB,UAAWD,CAAW,8CAmBrCF,EAAYI,gaAzCzBF,EAAeG,GAAC,CAER,GAAMA,EAAE,KAAK,oBAAoB,IAAjC,OAAiC,CAClC,MAAAC,GAAKN,CAAY,EACZ,UAAAO,KAAKF,EAAE,KAAK,oBAAoB,UAChCG,EAAI,EAAGA,EAAIF,EAAE,OAAQE,IACxBF,EAAEE,CAAC,EAAE,gBAAkBH,EAAE,SAC3BC,EAAEE,CAAC,EAAE,MAAM,OAASH,EAAE,KAAK,oBAAoB,EAAEE,CAAC,EAAI;;qeC/B1C9B,EAAI,CAAA,CAAA,oJAAJA,EAAI,CAAA,CAAA,CAAA,CAAA,iYAqBhB;AAAA;AAAA,yQA1BEgC,CAAgB,EACxBhC,EAAS,CAAA,8MAUX,IAAK,yEACL,GAAI,sBACJ,UAAW,MACX,WAAY,6BAIe,MAAAiC,EAAA,CAAA,CAAA,KAAA,cAAA,EAAAC,GAAcpC,EAAe,CAAA,iUAjBtDE,EAAS,CAAA,CAAA,8XAdE,CACV,GAAAmC,GAAkBtC,EAAa,EAClC,SAAQ,CACN,MAAK,CACH,QAAS,SACT,QAAO,CAAG,SAAU,OAAQ,QAAS,SAAU,OAAO;;;;;;;;;;"}